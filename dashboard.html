<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sublime Logs — Dashboard</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Lobster&display=swap" rel="stylesheet">

<!-- Paystack SDK -->
<script src="https://js.paystack.co/v1/inline.js"></script>

<style>
:root{
  --primary-gradient: linear-gradient(90deg, #9b59b6, #e91e63);
  --card-bg: #ffffff;
  --muted: #6b7280;
  --success: #16a34a;
  --danger: #ef4444;
  --glass: rgba(255,255,255,0.8);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  margin:0;
  background: linear-gradient(180deg,#f3f6fb,#ffffff);
  color:#0f172a;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Header */
header.app-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:12px 16px;
  background: var(--primary-gradient);
  color:white;
  position:sticky;
  top:0;
  z-index:50;
  box-shadow: 0 6px 18px rgba(0,0,0,0.12);
}
.brand{
  display:flex;
  align-items:center;
  gap:12px;
}
.brand h1{
  font-family: 'Lobster', cursive;
  margin:0;
  font-size:20px;
  letter-spacing:0.2px;
}
.icon-btn{
  background:transparent;
  border:none;
  color:white;
  font-size:22px;
  padding:8px;
  cursor:pointer;
}
.back-home{
  background:white;
  color:#9b59b6;
  padding:8px 12px;
  border-radius:8px;
  text-decoration:none;
  font-weight:600;
}

/* Layout */
.container{
  display:flex;
  min-height:calc(100vh - 64px);
  transition: margin-left .3s;
}

/* Side menu */
nav.side-menu{
  width:280px;
  max-width:80%;
  background: var(--primary-gradient);
  border-right:1px solid rgba(15,23,42,0.04);
  padding:18px 12px;
  transform: translateX(-320px);
  transition: transform .28s ease;
  position:fixed;
  top:64px;
  left:0;
  bottom:0;
  z-index:60;
  box-shadow: 12px 0 30px rgba(2,6,23,0.06);
  overflow:auto;
  border-top-right-radius:12px;
  border-bottom-right-radius:12px;
  color:white;
}
nav.side-menu.open{ transform: translateX(0); }
nav.side-menu h3{ margin:0 0 10px 6px; font-size:14px; color:white }
nav.side-menu ul{ list-style:none; padding:0; margin:10px 0 0 }
nav.side-menu li{
  padding:12px 10px;
  margin-bottom:6px;
  border-radius:8px;
  cursor:pointer;
  font-weight:600;
}
nav.side-menu li:hover{ background: rgba(255,255,255,0.1) }

.close-menu{
  float:right;
  font-size:20px;
  cursor:pointer;
  padding:6px;
  color:white;
}

/* Main content area */
main.content{
  flex:1;
  padding:22px;
  margin-left:0;
  width:100%;
  transition: margin-left .28s;
}
@media(min-width:880px){
  nav.side-menu{ transform: translateX(0); position:relative; top:0; left:0; height:auto; box-shadow:none; }
  main.content{ margin-left: 280px; }
}

/* Profile card */
.profile-card{
  display:flex;
  gap:18px;
  align-items:center;
  padding:18px;
  background:var(--card-bg);
  border-radius:12px;
  box-shadow: 0 6px 18px rgba(12,23,51,0.06);
  margin-bottom:18px;
}
.avatar{
  width:84px; height:84px; border-radius:50%;
  background: url('https://cdn-icons-png.flaticon.com/512/149/149071.png') center/cover no-repeat;
  border:4px solid rgba(13,42,87,0.06);
  cursor:pointer;
  flex-shrink:0;
  position:relative;
  overflow:hidden;
}
.avatar .edit-dot{
  position:absolute; right:6px; bottom:6px;
  background:white; color:#9b59b6;
  font-weight:700; border-radius:50%; width:28px; height:28px;
  display:flex; align-items:center; justify-content:center;
  box-shadow:0 4px 10px rgba(2,6,23,0.08);
  font-size:14px;
}
.profile-info h2{ margin:0; font-size:18px }
.profile-info p{ margin:6px 0 0; color:var(--muted) }

.balance{
  margin-left:auto;
  text-align:right;
}
.balance .label{ font-size:12px; color:var(--muted) }
.balance .amount{ font-size:20px; font-weight:700; color:#9b59b6 }

/* Action buttons row */
.actions{ display:flex; gap:10px; flex-wrap:wrap; margin-bottom:18px; }
.btn{
  padding:10px 14px; border-radius:10px; border:none; cursor:pointer;
  background: var(--primary-gradient); color:white; font-weight:700;
  box-shadow:0 6px 18px rgba(155,89,182,0.2);
}
.btn.ghost{ background:transparent; color:#9b59b6; border:1px solid rgba(155,89,182,0.3) }

/* Card */
.card{
  background:var(--card-bg);
  padding:16px;
  border-radius:12px;
  box-shadow:0 6px 18px rgba(12,23,51,0.04);
  margin-bottom:18px;
}

/* Transactions table */
table{ width:100%; border-collapse:collapse; font-size:14px; }
th,td{ padding:12px 10px; border-bottom:1px solid rgba(15,23,42,0.04); text-align:left }
th{ color: #06102b; font-weight:700; font-size:13px }
.small{ font-size:13px; color:var(--muted) }

/* Modals */
.modal-backdrop{
  position:fixed; inset:0; background:rgba(2,6,23,0.45);
  display:none; align-items:center; justify-content:center; z-index:120;
}
.modal-backdrop.open{ display:flex; }
.modal{
  width:95%; max-width:520px; background:white; padding:18px; border-radius:12px;
  box-shadow:0 20px 60px rgba(2,6,23,0.3);
}
.modal h3{ margin:0 0 12px; color:#9b59b6 }

.form-row{ margin-bottom:10px; }
.form-row label{ display:block; font-size:13px; color:var(--muted); margin-bottom:6px }
.form-row input, .form-row textarea{
  width:100%; padding:10px 12px; border-radius:8px; border:1px solid rgba(12,23,51,0.06);
  outline:none; font-size:14px;
}

.toast-wrap{ position:fixed; right:18px; bottom:18px; z-index:140; display:flex; flex-direction:column; gap:8px; }
.toast{ padding:10px 12px; border-radius:10px; color:white; font-weight:700; min-width:180px; display:flex; gap:8px; align-items:center; box-shadow:0 8px 26px rgba(2,6,23,0.18) }
.toast.success{ background:var(--success) }
.toast.error{ background:var(--danger) }

/* Responsive */
@media(max-width:760px){
  .profile-card{ flex-direction:row; gap:12px; align-items:center }
  .balance{ margin-left:0; text-align:left }
}

/* tiny helpers */
.muted{ color:var(--muted) }
.gap-12{ gap:12px }
</style>
</head>
<body>
<!-- Header -->
<header class="app-header">
  <div class="brand">
    <button class="icon-btn" id="menu-btn" aria-label="Open menu">☰</button>
    <h1>Sublime Logs</h1>
  </div>
  <div style="display:flex;align-items:center;gap:12px">
    <a class="back-home" href="#" id="back-home">Back to Homepage</a>
    <button class="icon-btn" id="logout-btn" title="Log out">⎋</button>
  </div>
</header>

<div class="container">
  <!-- Side Menu -->
  <nav class="side-menu" id="side-menu" aria-hidden="true">
    <span class="close-menu" id="close-menu" title="Close menu">✕</span>
    <h3>Quick Actions</h3>
    <ul>
      <li id="menu-profile">Profile</li>
      <li id="menu-fund">Fund Account</li>
      <li id="menu-buy">Buy Number</li>
      <li id="menu-send">Send Gift</li>
      <li id="menu-transactions">Transaction History</li>
      <li id="menu-logout">Logout</li>
    </ul>
  </nav>

  <!-- Main content -->
  <main class="content" id="main-content">
    <div class="profile-card card">
      <div class="avatar" id="avatar" title="Click to upload avatar">
        <div class="edit-dot">✎</div>
      </div>

      <div class="profile-info">
        <h2 id="user-name">Welcome</h2>
        <p id="user-email" class="muted">your.email@example.com</p>
        <div class="small muted" id="member-since">Member since: —</div>
      </div>

      <div class="balance">
        <div class="label small">Balance</div>
        <div class="amount" id="balance">₦0.00</div>
      </div>
    </div>

    <div class="actions">
      <button class="btn" id="btn-profile">Profile</button>
      <button class="btn" id="btn-fund">Fund Account</button>
      <button class="btn" id="btn-buy">Buy Number</button>
      <button class="btn" id="btn-send">Send Gift</button>
      <button class="btn ghost" id="btn-trans-history">Transaction History</button>
    </div>

    <div class="card">
      <h3 style="margin-top:0">Transaction History</h3>
      <div style="overflow:auto">
        <table aria-live="polite" id="transactions-table">
          <thead>
            <tr>
              <th>Type</th>
              <th>Amount</th>
              <th>Date</th>
              <th>Status</th>
              <th>Reference</th>
            </tr>
          </thead>
          <tbody>
            <!-- rows injected here -->
          </tbody>
        </table>
      </div>
    </div>
  </main>
</div>

<!-- Hidden file input for avatar -->
<input id="avatar-input" type="file" accept="image/*" style="display:none" />

<!-- Modals -->
<div class="modal-backdrop" id="modal-backdrop">
  <div class="modal" role="dialog" aria-modal="true" id="modal"></div>
</div>

<script>
// ====== DOM Elements ======
const sideMenu = document.getElementById('side-menu');
const menuBtn = document.getElementById('menu-btn');
const closeMenuBtn = document.getElementById('close-menu');
const modalBackdrop = document.getElementById('modal-backdrop');
const modal = document.getElementById('modal');
const avatar = document.getElementById('avatar');
const avatarInput = document.getElementById('avatar-input');
const balanceEl = document.getElementById('balance');
const transactionsTable = document.getElementById('transactions-table').querySelector('tbody');

// ====== Dummy Data ======
let user = {
    name: "Opeyemi Temilola",
    email: "opeyemi.temilola@example.com",
    balance: 300000,
    memberSince: "2025-01-01",
    avatarUrl: "https://cdn-icons-png.flaticon.com/512/149/149071.png"
};

let transactions = [
    {type: "Fund Account", amount: 50000, date: "2025-09-30", status: "Success", ref: "TRX001"},
    {type: "Buy Number", amount: 10000, date: "2025-09-29", status: "Success", ref: "TRX002"},
    {type: "Send Gift", amount: 15000, date: "2025-09-28", status: "Pending", ref: "TRX003"}
];

// ====== Functions ======
function openMenu() { sideMenu.classList.add('open'); sideMenu.setAttribute('aria-hidden','false'); }
function closeMenu() { sideMenu.classList.remove('open'); sideMenu.setAttribute('aria-hidden','true'); }

function showModal(contentHtml) {
    modal.innerHTML = contentHtml;
    modalBackdrop.classList.add('open');
}
function closeModal() {
    modalBackdrop.classList.remove('open');
}

function updateProfileUI() {
    document.getElementById('user-name').textContent = user.name;
    document.getElementById('user-email').textContent = user.email;
    document.getElementById('member-since').textContent = `Member since: ${user.memberSince}`;
    balanceEl.textContent = `₦${user.balance.toLocaleString()}`;
    avatar.style.backgroundImage = `url('${user.avatarUrl}')`;
}

function renderTransactions() {
    transactionsTable.innerHTML = "";
    transactions.forEach(tx => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${tx.type}</td>
            <td>₦${tx.amount.toLocaleString()}</td>
            <td>${tx.date}</td>
            <td>${tx.status}</td>
            <td>${tx.ref}</td>
        `;
        transactionsTable.appendChild(row);
    });
}

function payWithPaystack(amount, callback) {
    const handler = PaystackPop.setup({
        key: 'YOUR_PUBLIC_PAYSTACK_KEY', // Replace with your public key
        email: user.email,
        amount: amount * 100, // Paystack expects amount in kobo
        currency: "NGN",
        ref: `SUBLIME-${Math.floor(Math.random()*1000000)}`,
        onClose: function() {
            alert('Payment cancelled.');
        },
        callback: function(response) {
            alert('Payment successful! Reference: ' + response.reference);
            // Update balance and transactions
            user.balance += amount;
            transactions.unshift({
                type: "Fund Account",
                amount: amount,
                date: new Date().toISOString().split('T')[0],
                status: "Success",
                ref: response.reference
            });
            updateProfileUI();
            renderTransactions();
        }
    });
    handler.openIframe();
}

// ====== Event Listeners ======
menuBtn.addEventListener('click', openMenu);
closeMenuBtn.addEventListener('click', closeMenu);
modalBackdrop.addEventListener('click', e => { if(e.target===modalBackdrop) closeModal(); });

// Avatar upload
avatar.addEventListener('click', () => avatarInput.click());
avatarInput.addEventListener('change', e => {
    const file = e.target.files[0];
    if(file){
        const reader = new FileReader();
        reader.onload = function(evt){
            user.avatarUrl = evt.target.result;
            avatar.style.backgroundImage = `url('${user.avatarUrl}')`;
        }
        reader.readAsDataURL(file);
    }
});

// Action buttons
document.getElementById('btn-profile').addEventListener('click', () => {
    showModal(`
        <h3>Profile Info</h3>
        <p><strong>Name:</strong> ${user.name}</p>
        <p><strong>Email:</strong> ${user.email}</p>
        <p><strong>Member Since:</strong> ${user.memberSince}</p>
        <button class="btn" onclick="closeModal()">Close</button>
    `);
});

document.getElementById('btn-fund').addEventListener('click', () => {
    showModal(`
        <h3>Fund Account</h3>
        <div class="form-row">
            <label>Amount (₦)</label>
            <input type="number" id="fund-amount" value="1000" min="100" />
        </div>
        <button class="btn" id="fund-pay-btn">Pay Now</button>
        <button class="btn ghost" onclick="closeModal()">Cancel</button>
    `);
    document.getElementById('fund-pay-btn').addEventListener('click', () => {
        const amt = parseFloat(document.getElementById('fund-amount').value);
        if(amt > 0) payWithPaystack(amt);
        closeModal();
    });
});

document.getElementById('btn-buy').addEventListener('click', () => {
    showModal(`
        <h3>Buy Number</h3>
        <div class="form-row">
            <label>Number to Buy</label>
            <input type="text" id="buy-number" placeholder="Enter number"/>
        </div>
        <button class="btn" id="buy-number-btn">Buy</button>
        <button class="btn ghost" onclick="closeModal()">Cancel</button>
    `);
    document.getElementById('buy-number-btn').addEventListener('click', () => {
        const num = document.getElementById('buy-number').value;
        if(num){
            transactions.unshift({
                type: "Buy Number",
                amount: 3000,
                date: new Date().toISOString().split('T')[0],
                status: "Success",
                ref: `BUY-${Math.floor(Math.random()*10000)}`
            });
            user.balance -= 3000;
            updateProfileUI();
            renderTransactions();
            alert(`Number ${num} purchased successfully!`);
            closeModal();
        }
    });
});

document.getElementById('btn-send').addEventListener('click', () => {
    showModal(`
        <h3>Send Gift</h3>
        <div class="form-row">
            <label>Recipient Email</label>
            <input type="email" id="gift-email" placeholder="Enter email"/>
        </div>
        <div class="form-row">
            <label>Amount (₦)</label>
            <input type="number" id="gift-amount" placeholder="Enter amount"/>
        </div>
        <button class="btn" id="send-gift-btn">Send</button>
        <button class="btn ghost" onclick="closeModal()">Cancel</button>
    `);
    document.getElementById('send-gift-btn').addEventListener('click', () => {
        const email = document.getElementById('gift-email').value;
        const amount = parseFloat(document.getElementById('gift-amount').value);
        if(email && amount>0 && amount<=user.balance){
            transactions.unshift({
                type: "Send Gift",
                amount: amount,
                date: new Date().toISOString().split('T')[0],
                status: "Success",
                ref: `GIFT-${Math.floor(Math.random()*10000)}`
            });
            user.balance -= amount;
            updateProfileUI();
            renderTransactions();
            alert(`₦${amount.toLocaleString()} sent to ${email} successfully!`);
            closeModal();
        } else alert('Invalid input or insufficient balance.');
    });
});

// Initialize
updateProfileUI();
renderTransactions();
</script>
</body>
</html>
